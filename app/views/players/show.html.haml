.row
  .twelve.columns
    %h1 User profile

    - if @user != current_user
      - invitations = current_user.invitations.where(invited_id: @user.id)

      - if current_user.friends.include?(@user)
        %p 
          You are friend
          - friend = current_user.friendships.find_by_friend_id(@user)
          - friend = current_user.inverse_friendships.find_by_user_id(@user) if friend.blank?
          = link_to "Remove from friends", friendship_path(friend), method: :delete, confirm: "Are you sure?"
      - elsif invitations.present?
        %p You're sent invitation to friend now.
      - else
        - unless current_user.friends.include?(@user)
          = button_to "Add to friends", person_invitations_path(@user)

      - if invitations.present? && invitations.select(&:training).present?
        %p You're sent training invitation to user now.
      - else
        - if current_user.trained_users.include?(@user)
          - training = current_user.trainings.find_by_user_id(@user.id)
          .div
            %p
              = "You are coach for this user."
              = link_to "Training", training_path(training)
        - else
          = button_to "Add to training", training_person_invitations_path(@user)

      - if current_user.coaches.include?(@user)
        .div
          %p
            - training = current_user.inverse_trainings.find_by_coach_id(@user.id)
            = "You are trained for this user."
            = link_to "Training", training_path(training)        
    
    %hr

    = link_to "send message", new_person_message_path(@user)

    %hr

    .avatar
      = image_tag @user.avatar.url, size: "100x100" if @user.avatar?
    %p= @user.first_name
    %p= @user.last_name
    %p= @user.city

- if current_user.coach && current_user.trained_users.include?(@user)
  %h3 Parameters
  %ul
    - @user.parameters.each do |parameter|
      %li= parameter.height
      %li= parameter.weight

  %h3 Prohibitions (przeciwskazania)
  %ul
    - @user.prohibitions.each do |prohibition|
      %li= prohibition.name